(()=>{const m=document.documentElement,l=document.querySelector(".app"),a=document.querySelector(".game-ui"),c=document.querySelector(".language-ui"),p=document.querySelector(".language"),f=document.querySelector(".categories"),e={ios:{link:"https://apps.apple.com/app/id1498057243",banner:"?pt=1178695&ct=psycatgames_tod_webapp_banner",interstitial:"?pt=1178695&ct=psycatgames_tod_webapp_interstitial",text:"?pt=1178695&ct=psycatgames_tod_webapp_text"},android:{link:"https://play.google.com/store/apps/details?id=com.vanilla.spinthebottle",banner:"&referrer=utm_source%3Dpsycatgames_website%26utm_medium%3Dbanner%26utm_content%3Dtod_webapp%26utm_campaign%3Dpsycatgames_internal_ads",interstitial:"&referrer=utm_source%3Dpsycatgames_website%26utm_medium%3Dinterstitial%26utm_content%3Dtod_webapp%26utm_campaign%3Dpsycatgames_internal_ads",text:"&referrer=utm_source%3Dpsycatgames_website%26utm_medium%3Dtext%26utm_content%3Dtod_webapp%26utm_campaign%3Dpsycatgames_internal_ads"}},u=navigator.userAgent||navigator.vendor||window.opera,h="/svg/app-icon/truth-or-dare.63f7f58bf4b1769cd5b0ae968da0a88f.svg";e.ios.linkBanner=e.ios.link+e.ios.banner,e.ios.linkInterstitial=e.ios.link+e.ios.interstitial,e.ios.linkText=e.ios.link+e.ios.text,e.android.linkBanner=e.android.link+e.android.banner,e.android.linkInterstitial=e.android.link+e.android.interstitial,e.android.linkText=e.android.link+e.android.text,setScreenHeight=()=>m.style.setProperty("--h",window.innerHeight+"px"),put=(e,t)=>e.forEach((n,s)=>t.appendChild(e[s])),make=(e,t=[])=>(x=document.createElement(e),t.forEach((e,n)=>x.classList.add(t[n])),x);let n={psycat:psycatgames,app:"app/truth-or-dare/",id:"truth-or-dare",categories:[],language:translations.lang,category:0},d={url:`${psycatgames}api/tod-v2/`,arg:{id:n.id,language:translations.lang}},r=!1,i={banner:e.ios.linkBanner,interstitial:e.ios.linkInterstitial,text:e.ios.linkText},o={clicks:{truth:0,dare:0,audio:0},view:{interstitial:0}},s={t:[],d:[]};n.baseURL=n.psycat+n.app,/windows phone/i.test(u)||/android/i.test(u)?(i.banner=e.android.linkBanner,i.interstitial=e.android.linkInterstitial,i.text=e.android.linkText,r=!0):/iPad|iPhone|iPod/.test(u)&&!window.MSStream&&(r=!0),translations.categories.forEach((e)=>{let s={id:e.id,title:e.name};n.categories.push(s)}),n.categories.push({id:"mixed",title:translations.mixed}),createLanguageBtn=()=>{let o=make("div",["label"]),s=make("div",["btn"]),e=make("img",["flag"]),i=make("span",["name"]),t=make("img",["dropdown"]);o.innerText=translations.changeLanguage,i.innerText=translations.languageName,e.src=`/images/flags/svg/${n.language}.svg`,e.width=38,e.height=28,e.alt="Language flag",t.src=`/app/truth-or-dare/v2/img/dropdown.svg`,t.width=14,t.height=10,e.alt="",s.addEventListener("click",()=>languageOverlay()),put([e,i,t],s),put([o,s],p)},languageOverlay=()=>{uiAnalytics({languageOverlay:!0}),l.style.display="none",c.style.display="flex";let t=make("div",["headline"]),e=make("div",["close"]),s=make("div",["list"]);t.innerText=translations.languages,e.innerText=translations.close,availableLanguages.forEach((e)=>{let o=make("a",["entry"]),i=make("img",["flag"]),a=make("span",["name"]),r=make("img",["check"]);a.innerText=e.name,i.src=`/images/flags/svg/${e.id}.svg`,r.src=`/app/truth-or-dare/v2/img/check.svg`,e.id===n.language&&o.classList.add("active"),o.href=e.url,put([i,a,r],o),put([o],s)}),e.addEventListener("click",()=>{c.style.display="none",l.style.display="flex",c.innerHTML=""}),put([t,s,e],c)},populateCategories=()=>{n.categories.forEach((e)=>{let i=make("div",["entry"]),s=make("img",["icon"]),a=make("span",["name"]),o=make("img",["arrow"]);a.innerHTML=e.title,e.id==="hot"&&(a.innerHTML=`${e.title}<i>18+</i>`),s.src=`/app/truth-or-dare/v2/img/${e.id}.svg`,s.width=56,s.height=56,s.alt=`${e.title} icon`,o.src=`/app/truth-or-dare/v2/img/arrow-r.svg`,o.width=12,o.height=22,o.alt="",i.addEventListener("click",()=>{d.arg.category=e.id,n.category=e.id,startGame(),uiAnalytics({modeSelect:!0},e.id)}),put([s,a,o],i),put([i],f)})},startGame=()=>{l.style.display="none",a.style.display="flex";let d=make("div",["category-wrap"]),g=make("img",["category-icon"]),f=make("span",["category-name"]),m=make("img",["category-dropdown"]),e=make("div",["text-wrap"]),r=make("div",["headline"]),o=make("div",["text"]),p=make("div",["btn-wrap"]),c=make("div",["truth"]),u=make("div",["dare"]),t=make("a",["app-store-mobile"]),v=make("span",["text"]),b=make("img",["icon"]),j=make("div",["arrow"]),_=make("span"),w=make("span"),y=make("img");g.src=`/app/truth-or-dare/v2/img/${n.category}.svg`,f.innerText=n.categories.find(e=>e.id===n.category).title,m.src=`/app/truth-or-dare/v2/img/dropdown.svg`,r.innerText=`${translations.truthOrDare}`,o.innerText=translations.startText,c.innerText=translations.truth,u.innerText=translations.dare,v.innerText=translations.getTheApp,b.src=h,y.src="/app/never-have-i-ever/img/arrow-button.svg",t.href=i.banner,t.rel="noopener",d.addEventListener("click",()=>{a.style.display="none",l.style.display="flex",a.innerHTML="",s.t=[],s.d=[],uiAnalytics({switchCategory:!0})}),clicker(u,"dare",r,o,e),clicker(c,"truth",r,o,e),put([g,f,m],d),put([r,o],e),put([c,u],p),put([_,w,y],j),put([b,v,j],t),put([d,e,p,t],a)},clicker=(e,t,n,s,o)=>{e.addEventListener("click",()=>{createAction(n,s,t,o),responsiveVoice.cancel()})},createAction=(e,n,a,c)=>{e.innerText=translations[a],d.arg.type=a,n.style.opacity=0,n.style.transition=".3s ease",r&&a==="dare"&&(o.clicks.dare===8||o.clicks.dare===50||o.clicks.dare===100)?(t=translations.getTheAppNow,n.innerHTML=`${t}<br><a href='${i.text}'>${translations.downloadNow}</a>`,n.style.opacity=1,document.querySelector(".audio")&&document.querySelector(".audio").remove()):a==="truth"?s.t.length===0?pingAPI(a,n,c):picker(a,n,c):s.d.length===0?pingAPI(a,n,c):picker(a,n,c),uiAnalytics({tod:!0},a)},pingAPI=(e,t,n)=>{fetch(d.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify(d.arg),cache:"no-cache"}).then(e=>e.json()).then(o=>{e==="truth"?s.t=[...o.results]:s.d=[...o.results],picker(e,t,n)}).catch(()=>console.log("error"))},picker=(e,t,n)=>{if(e==="truth"){let e=randomIndex(s.t),o=s.t[e];s.t.splice(e,1),populate(o,t,n)}else{let e=randomIndex(s.d),o=s.d[e];s.d.splice(e,1),populate(o,t,n)}},randomIndex=e=>Math.floor(Math.random()*e.length),populate=(e,t,n)=>{t.innerText=e,t.style.opacity=1,document.querySelector(".audio")&&document.querySelector(".audio").remove();let s=make("img",["audio"]);s.src="/app/never-have-i-ever/img/audio.svg",put([s],n),s.addEventListener("click",()=>{responsiveVoice.speak(e,translations.voice),setInterval(()=>{responsiveVoice.isPlaying()?(s.classList.add("playing"),s.removeAttribute("style")):(s.classList.remove("playing"),s.style.opacity=1,s.style.animation="unset")},100),uiAnalytics({audio:!0})})},uiAnalytics=(e,t=0)=>{x=30,e.audio&&++o.clicks.audio,e.tod&&++o.clicks[t],(o.clicks.dare===x||o.clicks.truth===x)&&o.view.interstitial===0&&(++o.view.interstitial,interstitial()),e.languageOverlay,e.switchCategory,e.closeAd,e.modeSelect},interstitial=()=>{if(r&&document.querySelector(".interstitial")===null){let e=make("div",["interstitial"]),n=make("img",["icon"]),s=make("div",["headline"]),o=make("div",["wrap"]),t=make("a",["cta"]),r=make("div",["close"]);n.src=h,s.innerText=translations.upsellText,t.innerText=translations.downloadNow,t.href=i.interstitial,translations.benefits.forEach((e)=>{let n=make("div");n.innerText=e,put([n],o)}),r.addEventListener("click",()=>{e.remove(),uiAnalytics({closeAd:!0})}),put([n,s,o,t,r],e),put([e],a)}},document.addEventListener("DOMContentLoaded",()=>{setScreenHeight(),populateCategories(),createLanguageBtn()})})()